{"version":3,"sources":["webpack:///webpack/bootstrap 4e0bfa5d365e937227e2","webpack:///./src/ui-scroll.js","webpack:///./src/modules/jqLiteExtras.js","webpack:///./src/modules/elementRoutines.js","webpack:///./src/modules/buffer.js","webpack:///./src/modules/viewport.js","webpack:///./src/modules/padding.js","webpack:///./src/modules/adapter.js"],"names":["angular","module","service","run","jqLiteExtras","window","jQuery","registerFor","element","directive","restrict","controller","scope","container","viewport","forEach","children","child","tagName","toLowerCase","console","$injector","$rootScope","$timeout","$q","$parse","require","transclude","priority","terminal","link","$scope","$attr","controllers","linker","match","uiScroll","Error","parseNumericAttr","value","defaultValue","result","isNaN","BUFFER_MIN","BUFFER_DEFAULT","PADDING_MIN","PADDING_DEFAULT","datasource","itemName","datasourceName","viewportController","bufferSize","Math","max","padding","startIndex","ridActual","pending","elementRoutines","buffer","adapter","adjustBuffer","reload","isDatasourceValid","isObject","isFunction","get","indexStore","defineProperty","propName","propUserName","descriptor","Object","getOwnPropertyDescriptor","set","length","topPaddingHeightOld","topDataPos","adjustPadding","adjustScrollTopAfterMinIndexSet","fetchNext","success","next","index","append","item","count","fetchPrevious","first","prepend","clone","createPaddingElements","$destroy","remove","$on","unbindEvents","unbind","wheelHandler","bind","applyContainerStyle","isInvalid","rid","$$destroyed","bindEvents","resizeAndScrollHandler","resetTopPadding","resetBottomPadding","arguments","reset","isElementVisible","wrapper","height","offsetParent","visibilityWatcher","unregisterVisibilityWatcher","insertWrapperContent","insertAfter","createElement","insertElement","$watch","addClass","promises","sibling","undefined","transform","updateDOM","toBePrepended","toBeRemoved","inserted","i","op","unshift","push","concat","insertElementAnimated","removeItem","$index","prepended","removed","animated","updatePaddings","updates","all","then","enqueueFetch","shouldLoadBottom","effectiveHeight","fetch","loading","shouldLoadTop","w","removeClass","calculateProperties","adjustBufferAfterFetch","adjustScrollTopAfterPrepend","shift","eof","clipTop","bof","clipBottom","$$phase","isLoading","disabled","$apply","event","scrollTop","yMax","scrollHeight","clientHeight","preventDefault","JQLiteExtras","convertToPx","css","getStyle","isWindow","prototype","name","self","elem","nodeType","style","call","obj","document","location","alert","setInterval","scrollTo","direction","top","left","method","prop","preserve","isDefined","documentElement","getComputedStyle","parseFloat","currentStyle","rs","rsLeft","core_pnum","source","rnumnonpx","RegExp","test","runtimeStyle","pixelLeft","getMeasurements","measure","base","borderA","borderB","computedMarginA","computedMarginB","computedStyle","dirA","dirB","marginA","marginB","paddingA","paddingB","width","border","margin","offsetWidth","offsetHeight","getWidthHeight","measurements","outer","outerfull","before","newElem","j","parent","ref","contents","after","outerHTML","isNumber","outerHeight","option","outerWidth","offset","docElem","win","box","doc","ownerDocument","getBoundingClientRect","defaultView","parentWindow","pageYOffset","clientTop","pageXOffset","scrollLeft","clientLeft","key","ElementRoutines","$animate","has","isAngularVersionLessThen1_3","version","major","minor","newElement","previousElement","deferred","defer","enter","resolve","promise","removeElement","leave","ScrollBuffer","create","Array","extend","size","minIndex","maxIndex","minIndexUser","maxIndexUser","items","insert","reverse","min","operation","splice","arg1","arg2","indexOf","removeElementAnimated","elements","Number","MAX_VALUE","bottom","MIN_VALUE","Viewport","topPadding","bottomPadding","bufferPadding","getScope","template","bottomDataPos","bottomVisiblePos","topVisiblePos","e","overage","overageHeight","itemHeight","emptySpaceHeight","cache","add","topPaddingHeight","reduce","summ","bottomPaddingHeight","visibleItemsHeight","averageItemHeight","adjustTopPadding","adjustBottomPadding","topPaddingHeightAdd","bottomPaddingHeightAdd","diff","paddingHeight","clear","Padding","Cache","sort","a","b","table","find","getCtrlOnData","attr","onSyntax","log","ctrl","tail","candidate","candidateScope","candidateName","target","Adapter","viewportScope","startScope","$parent","publicContext","assignAdapter","generatePublicContext","adapterAttr","replace","ctrlOnData","adapterOnScope","assign","error","message","publicMethods","publicProps","property","slice","applyUpdate","newItems","rowTop","topHeight","topDone","bottomDone","itemTop","isEOF","isArray","keepIt","pos","newItem"],"mappings":"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","file":"ui-scroll.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e0bfa5d365e937227e2","import JQLiteExtras from './modules/jqLiteExtras';\nimport ElementRoutines from './modules/elementRoutines.js';\nimport ScrollBuffer from './modules/buffer.js';\nimport Viewport from './modules/viewport.js';\nimport Adapter from './modules/adapter.js';\n\nangular.module('ui.scroll', [])\n\n  .service('jqLiteExtras', () => new JQLiteExtras())\n  .run(['jqLiteExtras', (jqLiteExtras) =>\n    !window.jQuery ? jqLiteExtras.registerFor(angular.element) : null\n  ])\n\n  .directive('uiScrollViewport', function () {\n    return {\n      restrict: 'A',\n      controller: [\n        '$scope',\n        '$element',\n        function (scope, element) {\n          this.container = element;\n          this.viewport = element;\n          this.scope = scope;\n\n          angular.forEach(element.children(), (child => {\n            if (child.tagName.toLowerCase() === 'tbody') {\n              this.viewport = angular.element(child);\n            }\n          }));\n\n          return this;\n        }\n      ]\n    };\n  })\n\n  .directive('uiScroll', [\n    '$log',\n    '$injector',\n    '$rootScope',\n    '$timeout',\n    '$q',\n    '$parse',\n    function (console, $injector, $rootScope, $timeout, $q, $parse) {\n\n      return {\n        require: ['?^uiScrollViewport'],\n        restrict: 'A',\n        transclude: 'element',\n        priority: 1000,\n        terminal: true,\n        link: link\n      };\n\n      function link($scope, element, $attr, controllers, linker) {\n        const match = $attr.uiScroll.match(/^\\s*(\\w+)\\s+in\\s+([(\\w|\\$)\\.]+)\\s*$/);\n        if (!match) {\n          throw new Error('Expected uiScroll in form of \\'_item_ in _datasource_\\' but got \\'' + $attr.uiScroll + '\\'');\n        }\n\n        function parseNumericAttr(value, defaultValue) {\n          let result = $parse(value)($scope);\n          return isNaN(result) ? defaultValue : result;\n        }\n\n        const BUFFER_MIN = 3;\n        const BUFFER_DEFAULT = 10;\n        const PADDING_MIN = 0.3;\n        const PADDING_DEFAULT = 0.5;\n\n        let datasource = null;\n        const itemName = match[1];\n        const datasourceName = match[2];\n        const viewportController = controllers[0];\n        const bufferSize = Math.max(BUFFER_MIN, parseNumericAttr($attr.bufferSize, BUFFER_DEFAULT));\n        const padding = Math.max(PADDING_MIN, parseNumericAttr($attr.padding, PADDING_DEFAULT));\n        let startIndex = parseNumericAttr($attr.startIndex, 1);\n        let ridActual = 0;// current data revision id\n        let pending = [];\n\n        let elementRoutines = new ElementRoutines($injector, $q);\n        let buffer = new ScrollBuffer(elementRoutines, bufferSize);\n        let viewport = new Viewport(elementRoutines, buffer, element, viewportController, $rootScope, padding);\n        let adapter = new Adapter(viewport, buffer, adjustBuffer, reload, $attr, $parse, element, $scope);\n\n        if (viewportController) {\n          viewportController.adapter = adapter;\n        }\n\n        let isDatasourceValid = () => angular.isObject(datasource) && angular.isFunction(datasource.get);\n        datasource = $parse(datasourceName)($scope); // try to get datasource on scope\n        if (!isDatasourceValid()) {\n          datasource = $injector.get(datasourceName); // try to inject datasource as service\n          if (!isDatasourceValid()) {\n            throw new Error(datasourceName + ' is not a valid datasource');\n          }\n        }\n\n        let indexStore = {};\n\n        function defineProperty(datasource, propName, propUserName) {\n          let descriptor = Object.getOwnPropertyDescriptor(datasource, propName);\n          if (!descriptor || (!descriptor.set && !descriptor.get)) {\n            Object.defineProperty(datasource, propName, {\n              set: (value) => {\n                indexStore[propName] = value;\n                $timeout(() => {\n                  buffer[propUserName] = value;\n                  if (!pending.length) {\n                    let topPaddingHeightOld = viewport.topDataPos();\n                    viewport.adjustPadding();\n                    if (propName === 'minIndex') {\n                      viewport.adjustScrollTopAfterMinIndexSet(topPaddingHeightOld);\n                    }\n                  }\n                });\n              },\n              get: () => indexStore[propName]\n            });\n          }\n        }\n\n        defineProperty(datasource, 'minIndex', 'minIndexUser');\n        defineProperty(datasource, 'maxIndex', 'maxIndexUser');\n\n        const fetchNext = (datasource.get.length !== 2) ? (success) => datasource.get(buffer.next, bufferSize, success)\n          : (success) => {\n          datasource.get({\n            index: buffer.next,\n            append: buffer.length ? buffer[buffer.length - 1].item : void 0,\n            count: bufferSize\n          }, success);\n        };\n\n        const fetchPrevious = (datasource.get.length !== 2) ? (success) => datasource.get(buffer.first - bufferSize, bufferSize, success)\n          : (success) => {\n          datasource.get({\n            index: buffer.first - bufferSize,\n            prepend: buffer.length ? buffer[0].item : void 0,\n            count: bufferSize\n          }, success);\n        };\n\n        /**\n         * Build padding elements\n         *\n         * Calling linker is the only way I found to get access to the tag name of the template\n         * to prevent the directive scope from pollution a new scope is created and destroyed\n         * right after the builder creation is completed\n         */\n        linker((clone, scope) => {\n          viewport.createPaddingElements(clone[0]);\n          // we do not include the clone in the DOM. It means that the nested directives will not\n          // be able to reach the parent directives, but in this case it is intentional because we\n          // created the clone to access the template tag name\n          scope.$destroy();\n          clone.remove();\n        });\n\n        $scope.$on('$destroy', () => {\n          unbindEvents();\n          viewport.unbind('mousewheel', wheelHandler);\n        });\n\n        viewport.bind('mousewheel', wheelHandler);\n\n        $timeout(() => {\n          viewport.applyContainerStyle();\n          reload();\n        });\n\n        /* Private function definitions */\n\n        function isInvalid(rid) {\n          return (rid && rid !== ridActual) || $scope.$$destroyed;\n        }\n\n        function bindEvents() {\n          viewport.bind('resize', resizeAndScrollHandler);\n          viewport.bind('scroll', resizeAndScrollHandler);\n        }\n\n        function unbindEvents() {\n          viewport.unbind('resize', resizeAndScrollHandler);\n          viewport.unbind('scroll', resizeAndScrollHandler);\n        }\n\n        function reload() {\n          viewport.resetTopPadding();\n          viewport.resetBottomPadding();\n          if (arguments.length) {\n            startIndex = arguments[0];\n          }\n          buffer.reset(startIndex);\n          adjustBuffer();\n        }\n\n        function isElementVisible(wrapper) {\n          return wrapper.element.height() && wrapper.element[0].offsetParent;\n        }\n\n        function visibilityWatcher(wrapper) {\n          if (isElementVisible(wrapper)) {\n            buffer.forEach((item) => {\n              if (angular.isFunction(item.unregisterVisibilityWatcher)) {\n                item.unregisterVisibilityWatcher();\n                delete item.unregisterVisibilityWatcher;\n              }\n            });\n            if (!pending.length) {\n              adjustBuffer();\n            }\n          }\n        }\n\n        function insertWrapperContent(wrapper, insertAfter) {\n          createElement(wrapper, insertAfter, viewport.insertElement);\n          if (!isElementVisible(wrapper)) {\n            wrapper.unregisterVisibilityWatcher = wrapper.scope.$watch(() => visibilityWatcher(wrapper));\n          }\n          wrapper.element.addClass('ng-hide'); // hide inserted elements before data binding\n        }\n\n        function createElement(wrapper, insertAfter, insertElement) {\n          let promises = null;\n          let sibling = (insertAfter > 0) ? buffer[insertAfter - 1].element : undefined;\n          linker((clone, scope) => {\n            promises = insertElement(clone, sibling);\n            wrapper.element = clone;\n            wrapper.scope = scope;\n            scope[itemName] = wrapper.item;\n          });\n          if (adapter.transform)\n            adapter.transform(wrapper.scope, wrapper.element);\n          return promises;\n        }\n\n        function updateDOM() {\n          let promises = [];\n          const toBePrepended = [];\n          const toBeRemoved = [];\n          const inserted = [];\n\n          buffer.forEach((wrapper, i) => {\n            switch (wrapper.op) {\n              case 'prepend':\n                toBePrepended.unshift(wrapper);\n                break;\n              case 'append':\n                insertWrapperContent(wrapper, i);\n                wrapper.op = 'none';\n                inserted.push(wrapper);\n                break;\n              case 'insert':\n                promises = promises.concat(createElement(wrapper, i, viewport.insertElementAnimated));\n                wrapper.op = 'none';\n                inserted.push(wrapper);\n                break;\n              case 'remove':\n                toBeRemoved.push(wrapper);\n            }\n          });\n\n          toBeRemoved.forEach((wrapper) => promises = promises.concat(viewport.removeItem(wrapper)));\n\n          if (toBePrepended.length)\n            toBePrepended.forEach((wrapper) => {\n              insertWrapperContent(wrapper);\n              wrapper.op = 'none';\n            });\n\n          buffer.forEach((item, i) => item.scope.$index = buffer.first + i);\n\n          return {\n            prepended: toBePrepended,\n            removed: toBeRemoved,\n            inserted: inserted,\n            animated: promises\n          };\n\n        }\n\n        function updatePaddings(rid, updates) {\n          // schedule another adjustBuffer after animation completion\n          if (updates.animated.length) {\n            $q.all(updates.animated).then(() => {\n              viewport.adjustPadding();\n              adjustBuffer(rid);\n            });\n          } else {\n            viewport.adjustPadding();\n          }\n        }\n\n        function enqueueFetch(rid, updates) {\n          if (viewport.shouldLoadBottom()) {\n            if (!updates || buffer.effectiveHeight(updates.inserted) > 0) {\n              // this means that at least one item appended in the last batch has height > 0\n              if (pending.push(true) === 1) {\n                fetch(rid);\n                adapter.loading(true);\n              }\n            }\n          } else if (viewport.shouldLoadTop()) {\n            if ((!updates || buffer.effectiveHeight(updates.prepended) > 0) || pending[0]) {\n              // this means that at least one item appended in the last batch has height > 0\n              // pending[0] = true means that previous fetch was appending. We need to force at least one prepend\n              // BTW there will always be at least 1 element in the pending array because bottom is fetched first\n              if (pending.push(false) === 1) {\n                fetch(rid);\n                adapter.loading(true);\n              }\n            }\n          }\n        }\n\n        function adjustBuffer(rid) {\n          if (!rid) { // dismiss pending requests\n            pending = [];\n            rid = ++ridActual;\n          }\n\n          let updates = updateDOM();\n\n          // We need the item bindings to be processed before we can do adjustment\n          $timeout(() => {\n\n            // show elements after data binging has been done\n            updates.inserted.forEach(w => w.element.removeClass('ng-hide'));\n            updates.prepended.forEach(w => w.element.removeClass('ng-hide'));\n\n            if (isInvalid(rid)) {\n              return;\n            }\n\n            updatePaddings(rid, updates);\n            enqueueFetch(rid);\n\n            if (!pending.length) {\n              adapter.calculateProperties();\n            }\n          });\n        }\n\n        function adjustBufferAfterFetch(rid) {\n          let updates = updateDOM();\n\n          // We need the item bindings to be processed before we can do adjustment\n          $timeout(() => {\n\n            // show elements after data binging has been done\n            updates.inserted.forEach(w => w.element.removeClass('ng-hide'));\n            updates.prepended.forEach(w => w.element.removeClass('ng-hide'));\n\n            viewport.adjustScrollTopAfterPrepend(updates);\n\n            if (isInvalid(rid)) {\n              return;\n            }\n\n            updatePaddings(rid, updates);\n            enqueueFetch(rid, updates);\n            pending.shift();\n\n            if (pending.length)\n              fetch(rid);\n            else {\n              adapter.loading(false);\n              bindEvents();\n              adapter.calculateProperties();\n            }\n          });\n        }\n\n        function fetch(rid) {\n          if (pending[0]) {// scrolling down\n            if (buffer.length && !viewport.shouldLoadBottom()) {\n              adjustBufferAfterFetch(rid);\n            } else {\n              fetchNext((result) => {\n                if (isInvalid(rid)) {\n                  return;\n                }\n\n                if (result.length < bufferSize) {\n                  buffer.eof = true;\n                }\n\n                if (result.length > 0) {\n                  viewport.clipTop();\n                  buffer.append(result);\n                }\n\n                adjustBufferAfterFetch(rid);\n              });\n            }\n          } else {  // scrolling up\n            if (buffer.length && !viewport.shouldLoadTop()) {\n              adjustBufferAfterFetch(rid);\n            } else {\n              fetchPrevious((result) => {\n                if (isInvalid(rid)) {\n                  return;\n                }\n\n                if (result.length < bufferSize) {\n                  buffer.bof = true;\n                  // log 'bof is reached'\n                }\n\n                if (result.length > 0) {\n                  if (buffer.length) {\n                    viewport.clipBottom();\n                  }\n                  buffer.prepend(result);\n                }\n\n                adjustBufferAfterFetch(rid);\n              });\n            }\n          }\n        }\n\n        function resizeAndScrollHandler() {\n          if (!$rootScope.$$phase && !adapter.isLoading && !adapter.disabled) {\n\n            enqueueFetch(ridActual);\n\n            if (pending.length) {\n              unbindEvents();\n            } else {\n              adapter.calculateProperties();\n              $scope.$apply();\n            }\n          }\n        }\n\n        function wheelHandler(event) {\n          if (!adapter.disabled) {\n            let scrollTop = viewport[0].scrollTop;\n            let yMax = viewport[0].scrollHeight - viewport[0].clientHeight;\n\n            if ((scrollTop === 0 && !buffer.bof) || (scrollTop === yMax && !buffer.eof)) {\n              event.preventDefault();\n            }\n          }\n        }\n      }\n\n    }\n  ]);\n\n\n// WEBPACK FOOTER //\n// ./src/ui-scroll.js","/*!\r\n globals: angular, window\r\n List of used element methods available in JQuery but not in JQuery Lite\r\n element.before(elem)\r\n element.height()\r\n element.outerHeight(true)\r\n element.height(value) = only for Top/Bottom padding elements\r\n element.scrollTop()\r\n element.scrollTop(value)\r\n */\r\n\r\nexport default class JQLiteExtras {\r\n\r\n  registerFor(element) {\r\n    let convertToPx, css, getStyle, isWindow;\r\n    // angular implementation blows up if elem is the window\r\n    css = angular.element.prototype.css;\r\n\r\n    element.prototype.css = function (name, value) {\r\n      let self = this;\r\n      let elem = self[0];\r\n      if (!(!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style)) {\r\n        return css.call(self, name, value);\r\n      }\r\n    };\r\n\r\n    // as defined in angularjs v1.0.5\r\n    isWindow = (obj) => obj && obj.document && obj.location && obj.alert && obj.setInterval;\r\n\r\n    function scrollTo(self, direction, value) {\r\n      let elem = self[0];\r\n      let [method, prop, preserve] = {\r\n        top: [\r\n          'scrollTop',\r\n          'pageYOffset',\r\n          'scrollLeft'\r\n        ],\r\n        left: [\r\n          'scrollLeft',\r\n          'pageXOffset',\r\n          'scrollTop'\r\n        ]\r\n      }[direction];\r\n\r\n      if (isWindow(elem)) {\r\n        if (angular.isDefined(value)) {\r\n          return elem.scrollTo(self[preserve].call(self), value);\r\n        }\r\n        return (prop in elem) ? elem[prop] : elem.document.documentElement[method];\r\n      } else {\r\n        if (angular.isDefined(value)) {\r\n          elem[method] = value;\r\n        }\r\n        return elem[method];\r\n      }\r\n    }\r\n\r\n    if (window.getComputedStyle) {\r\n      getStyle = (elem) => window.getComputedStyle(elem, null);\r\n      convertToPx = (elem, value) => parseFloat(value);\r\n    } else {\r\n      getStyle = (elem) => elem.currentStyle;\r\n      convertToPx = (elem, value) => {\r\n        let left, result, rs, rsLeft, style;\r\n        let core_pnum = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source;\r\n        let rnumnonpx = new RegExp('^(' + core_pnum + ')(?!px)[a-z%]+$', 'i');\r\n\r\n        if (!rnumnonpx.test(value)) {\r\n          return parseFloat(value);\r\n        }\r\n\r\n        // ported from JQuery\r\n        style = elem.style;\r\n        left = style.left;\r\n        rs = elem.runtimeStyle;\r\n        rsLeft = rs && rs.left;\r\n        if (rs) {\r\n          rs.left = style.left;\r\n        }\r\n        // put in the new values to get a computed style out\r\n        style.left = value;\r\n        result = style.pixelLeft;\r\n        style.left = left;\r\n        if (rsLeft) {\r\n          rs.left = rsLeft;\r\n        }\r\n        return result;\r\n      };\r\n    }\r\n\r\n    function getMeasurements(elem, measure) {\r\n      let base, borderA, borderB, computedMarginA, computedMarginB, computedStyle, dirA, dirB, marginA, marginB, paddingA, paddingB;\r\n\r\n      if (isWindow(elem)) {\r\n        base = document.documentElement[{height: 'clientHeight', width: 'clientWidth'}[measure]];\r\n\r\n        return {\r\n          base: base,\r\n          padding: 0,\r\n          border: 0,\r\n          margin: 0\r\n        };\r\n      }\r\n\r\n      // Start with offset property\r\n      [\r\n        base,\r\n        dirA,\r\n        dirB\r\n      ] = {\r\n        width: [\r\n          elem.offsetWidth,\r\n          'Left',\r\n          'Right'\r\n        ],\r\n        height: [\r\n          elem.offsetHeight,\r\n          'Top',\r\n          'Bottom'\r\n        ]\r\n      }[measure];\r\n\r\n      computedStyle = getStyle(elem);\r\n      paddingA = convertToPx(elem, computedStyle['padding' + dirA]) || 0;\r\n      paddingB = convertToPx(elem, computedStyle['padding' + dirB]) || 0;\r\n      borderA = convertToPx(elem, computedStyle['border' + dirA + 'Width']) || 0;\r\n      borderB = convertToPx(elem, computedStyle['border' + dirB + 'Width']) || 0;\r\n      computedMarginA = computedStyle['margin' + dirA];\r\n      computedMarginB = computedStyle['margin' + dirB];\r\n\r\n      // I do not care for width for now, so this hack is irrelevant\r\n      // if ( !supportsPercentMargin )\r\n      // computedMarginA = hackPercentMargin( elem, computedStyle, computedMarginA )\r\n      // computedMarginB = hackPercentMargin( elem, computedStyle, computedMarginB )\r\n      marginA = convertToPx(elem, computedMarginA) || 0;\r\n      marginB = convertToPx(elem, computedMarginB) || 0;\r\n\r\n      return {\r\n        base: base,\r\n        padding: paddingA + paddingB,\r\n        border: borderA + borderB,\r\n        margin: marginA + marginB\r\n      };\r\n    }\r\n\r\n    function getWidthHeight(elem, direction, measure) {\r\n      let computedStyle, result;\r\n\r\n      let measurements = getMeasurements(elem, direction);\r\n\r\n      if (measurements.base > 0) {\r\n        return {\r\n          base: measurements.base - measurements.padding - measurements.border,\r\n          outer: measurements.base,\r\n          outerfull: measurements.base + measurements.margin\r\n        }[measure];\r\n      }\r\n\r\n      // Fall back to computed then uncomputed css if necessary\r\n      computedStyle = getStyle(elem);\r\n      result = computedStyle[direction];\r\n\r\n      if (result < 0 || result === null) {\r\n        result = elem.style[direction] || 0;\r\n      }\r\n\r\n      // Normalize \"\", auto, and prepare for extra\r\n      result = parseFloat(result) || 0;\r\n\r\n      return {\r\n        base: result - measurements.padding - measurements.border,\r\n        outer: result,\r\n        outerfull: result + measurements.padding + measurements.border + measurements.margin\r\n      }[measure];\r\n    }\r\n\r\n    // define missing methods\r\n    return angular.forEach({\r\n      before(newElem) {\r\n        var children, elem, i, j, parent, ref, self;\r\n        self = this;\r\n        elem = self[0];\r\n        parent = self.parent();\r\n        children = parent.contents();\r\n        if (children[0] === elem) {\r\n          return parent.prepend(newElem);\r\n        } else {\r\n          for (i = j = 1, ref = children.length - 1; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\r\n            if (children[i] === elem) {\r\n              angular.element(children[i - 1]).after(newElem);\r\n              return;\r\n            }\r\n          }\r\n          throw new Error('invalid DOM structure ' + elem.outerHTML);\r\n        }\r\n      },\r\n      height (value){\r\n        var self;\r\n        self = this;\r\n        if (angular.isDefined(value)) {\r\n          if (angular.isNumber(value)) {\r\n            value = value + 'px';\r\n          }\r\n          return css.call(self, 'height', value);\r\n        } else {\r\n          return getWidthHeight(this[0], 'height', 'base');\r\n        }\r\n      },\r\n      outerHeight(option) {\r\n        return getWidthHeight(this[0], 'height', option ? 'outerfull' : 'outer');\r\n      },\r\n      outerWidth(option) {\r\n        return getWidthHeight(this[0], 'width', option ? 'outerfull' : 'outer');\r\n      },\r\n\r\n      /*\r\n       The offset setter method is not implemented\r\n       */\r\n      offset(value) {\r\n        let docElem, win;\r\n        let self = this;\r\n        let box = {\r\n          top: 0,\r\n          left: 0\r\n        };\r\n        let elem = self[0];\r\n        let doc = elem && elem.ownerDocument;\r\n\r\n        if (arguments.length) {\r\n          if (value === undefined) {\r\n            return self;\r\n          }\r\n          // TODO: implement setter\r\n          throw new Error('offset setter method is not implemented');\r\n        }\r\n\r\n        if (!doc) {\r\n          return;\r\n        }\r\n\r\n        docElem = doc.documentElement;\r\n\r\n        // TODO: Make sure it's not a disconnected DOM node\r\n\r\n        if (elem.getBoundingClientRect != null) {\r\n          box = elem.getBoundingClientRect();\r\n        }\r\n\r\n        win = doc.defaultView || doc.parentWindow;\r\n\r\n        return {\r\n          top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),\r\n          left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)\r\n        };\r\n      },\r\n      scrollTop(value) {\r\n        return scrollTo(this, 'top', value);\r\n      },\r\n      scrollLeft(value) {\r\n        return scrollTo(this, 'left', value);\r\n      }\r\n    }, (value, key) => {\r\n      if (!element.prototype[key]) {\r\n        return element.prototype[key] = value;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/jqLiteExtras.js","export default class ElementRoutines {\r\n\r\n  constructor($injector, $q) {\r\n    this.$animate = ($injector.has && $injector.has('$animate')) ? $injector.get('$animate') : null;\r\n    this.isAngularVersionLessThen1_3 = angular.version.major === 1 && angular.version.minor < 3;\r\n    this.$q = $q;\r\n  }\r\n\r\n  insertElement(newElement, previousElement) {\r\n    previousElement.after(newElement);\r\n    return [];\r\n  }\r\n\r\n  removeElement(wrapper) {\r\n    wrapper.element.remove();\r\n    wrapper.scope.$destroy();\r\n    return [];\r\n  }\r\n\r\n  insertElementAnimated(newElement, previousElement) {\r\n    if (!this.$animate) {\r\n      return this.insertElement(newElement, previousElement);\r\n    }\r\n\r\n    if (this.isAngularVersionLessThen1_3) {\r\n      const deferred = this.$q.defer();\r\n      // no need for parent - previous element is never null\r\n      this.$animate.enter(newElement, null, previousElement, () => deferred.resolve());\r\n\r\n      return [deferred.promise];\r\n    }\r\n\r\n    // no need for parent - previous element is never null\r\n    return [this.$animate.enter(newElement, null, previousElement)];\r\n  }\r\n\r\n  removeElementAnimated(wrapper) {\r\n    if (!this.$animate) {\r\n      return this.removeElement(wrapper);\r\n    }\r\n\r\n    if (this.isAngularVersionLessThen1_3) {\r\n      const deferred = this.$q.defer();\r\n      this.$animate.leave(wrapper.element, () => {\r\n        wrapper.scope.$destroy();\r\n        return deferred.resolve();\r\n      });\r\n\r\n      return [deferred.promise];\r\n    }\r\n\r\n    return [(this.$animate.leave(wrapper.element)).then(() => wrapper.scope.$destroy())];\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/elementRoutines.js","export default function ScrollBuffer(elementRoutines, bufferSize) {\r\n  const buffer = Object.create(Array.prototype);\r\n\r\n  angular.extend(buffer, {\r\n    size: bufferSize,\r\n\r\n    reset(startIndex) {\r\n      buffer.remove(0, buffer.length);\r\n      buffer.eof = false;\r\n      buffer.bof = false;\r\n      buffer.first = startIndex;\r\n      buffer.next = startIndex;\r\n      buffer.minIndex = startIndex;\r\n      buffer.maxIndex = startIndex;\r\n      buffer.minIndexUser = null;\r\n      buffer.maxIndexUser = null;\r\n    },\r\n\r\n    append(items) {\r\n      items.forEach((item) => {\r\n        ++buffer.next;\r\n        buffer.insert('append', item);\r\n      });\r\n      buffer.maxIndex = buffer.eof ? buffer.next - 1 : Math.max(buffer.next - 1, buffer.maxIndex);\r\n    },\r\n\r\n    prepend(items) {\r\n      items.reverse().forEach((item) => {\r\n        --buffer.first;\r\n        buffer.insert('prepend', item);\r\n      });\r\n      buffer.minIndex = buffer.bof ? buffer.minIndex = buffer.first : Math.min(buffer.first, buffer.minIndex);\r\n    },\r\n\r\n    /**\r\n     * inserts wrapped element in the buffer\r\n     * the first argument is either operation keyword (see below) or a number for operation 'insert'\r\n     * for insert the number is the index for the buffer element the new one have to be inserted after\r\n     * operations: 'append', 'prepend', 'insert', 'remove', 'update', 'none'\r\n     */\r\n    insert(operation, item) {\r\n      const wrapper = {\r\n        item: item\r\n      };\r\n\r\n      if (operation % 1 === 0) {// it is an insert\r\n        wrapper.op = 'insert';\r\n        buffer.splice(operation, 0, wrapper);\r\n      } else {\r\n        wrapper.op = operation;\r\n        switch (operation) {\r\n          case 'append':\r\n            buffer.push(wrapper);\r\n            break;\r\n          case 'prepend':\r\n            buffer.unshift(wrapper);\r\n            break;\r\n        }\r\n      }\r\n    },\r\n\r\n    // removes elements from buffer\r\n    remove(arg1, arg2) {\r\n      if (angular.isNumber(arg1)) {\r\n        // removes items from arg1 (including) through arg2 (excluding)\r\n        for (let i = arg1; i < arg2; i++) {\r\n          elementRoutines.removeElement(buffer[i]);\r\n        }\r\n\r\n        return buffer.splice(arg1, arg2 - arg1);\r\n      }\r\n      // removes single item(wrapper) from the buffer\r\n      buffer.splice(buffer.indexOf(arg1), 1);\r\n\r\n      return elementRoutines.removeElementAnimated(arg1);\r\n    },\r\n\r\n    effectiveHeight(elements) {\r\n      if (!elements.length) {\r\n        return 0;\r\n      }\r\n      let top = Number.MAX_VALUE;\r\n      let bottom = Number.MIN_VALUE;\r\n      elements.forEach((wrapper) => {\r\n        if (wrapper.element[0].offsetParent) {\r\n          // element style is not display:none\r\n          top = Math.min(top, wrapper.element.offset().top);\r\n          bottom = Math.max(bottom, wrapper.element.offset().top + wrapper.element.outerHeight(true));\r\n        }\r\n      });\r\n      return Math.max(0, bottom - top);\r\n    }\r\n\r\n  });\r\n\r\n  return buffer;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/buffer.js","import Padding from './padding';\r\n\r\nexport default function Viewport(elementRoutines, buffer, element, viewportController, $rootScope, padding) {\r\n  let topPadding = null;\r\n  let bottomPadding = null;\r\n  const viewport = viewportController && viewportController.viewport ? viewportController.viewport : angular.element(window);\r\n  const container = viewportController && viewportController.container ? viewportController.container : undefined;\r\n  const scope = viewportController && viewportController.scope ? viewportController.scope : $rootScope;\r\n\r\n  viewport.css({\r\n    'overflow-anchor': 'none',\r\n    'overflow-y': 'auto',\r\n    'display': 'block'\r\n  });\r\n\r\n  function bufferPadding() {\r\n    return viewport.outerHeight() * padding; // some extra space to initiate preload\r\n  }\r\n\r\n  angular.extend(viewport, {\r\n    getScope() {\r\n      return scope;\r\n    },\r\n\r\n    createPaddingElements(template) {\r\n      topPadding = new Padding(template);\r\n      bottomPadding = new Padding(template);\r\n      element.before(topPadding);\r\n      element.after(bottomPadding);\r\n    },\r\n\r\n    applyContainerStyle() {\r\n      if (container && container !== viewport) {\r\n        viewport.css('height', window.getComputedStyle(container[0]).height);\r\n      }\r\n    },\r\n\r\n    bottomDataPos() {\r\n      let scrollHeight = viewport[0].scrollHeight;\r\n      scrollHeight = scrollHeight != null ? scrollHeight : viewport[0].document.documentElement.scrollHeight;\r\n      return scrollHeight - bottomPadding.height();\r\n    },\r\n\r\n    topDataPos() {\r\n      return topPadding.height();\r\n    },\r\n\r\n    bottomVisiblePos() {\r\n      return viewport.scrollTop() + viewport.outerHeight();\r\n    },\r\n\r\n    topVisiblePos() {\r\n      return viewport.scrollTop();\r\n    },\r\n\r\n    insertElement(e, sibling) {\r\n      return elementRoutines.insertElement(e, sibling || topPadding);\r\n    },\r\n\r\n    insertElementAnimated(e, sibling) {\r\n      return elementRoutines.insertElementAnimated(e, sibling || topPadding);\r\n    },\r\n\r\n    shouldLoadBottom() {\r\n      return !buffer.eof && viewport.bottomDataPos() < viewport.bottomVisiblePos() + bufferPadding();\r\n    },\r\n\r\n    clipBottom() {\r\n      // clip the invisible items off the bottom\r\n      let overage = 0;\r\n      let overageHeight = 0;\r\n      let itemHeight = 0;\r\n      let emptySpaceHeight = viewport.bottomDataPos() - viewport.bottomVisiblePos() - bufferPadding();\r\n\r\n      for (let i = buffer.length - 1; i >= 0; i--) {\r\n        itemHeight = buffer[i].element.outerHeight(true);\r\n        if (overageHeight + itemHeight > emptySpaceHeight) {\r\n          break;\r\n        }\r\n        bottomPadding.cache.add(buffer[i]);\r\n        overageHeight += itemHeight;\r\n        overage++;\r\n      }\r\n\r\n      if (overage > 0) {\r\n        buffer.eof = false;\r\n        buffer.remove(buffer.length - overage, buffer.length);\r\n        buffer.next -= overage;\r\n        viewport.adjustPadding();\r\n      }\r\n    },\r\n\r\n    shouldLoadTop() {\r\n      return !buffer.bof && (viewport.topDataPos() > viewport.topVisiblePos() - bufferPadding());\r\n    },\r\n\r\n    clipTop() {\r\n      // clip the invisible items off the top\r\n      let overage = 0;\r\n      let overageHeight = 0;\r\n      let itemHeight = 0;\r\n      let emptySpaceHeight = viewport.topVisiblePos() - viewport.topDataPos() - bufferPadding();\r\n\r\n      for (let i = 0; i < buffer.length; i++) {\r\n        itemHeight = buffer[i].element.outerHeight(true);\r\n        if (overageHeight + itemHeight > emptySpaceHeight) {\r\n          break;\r\n        }\r\n        topPadding.cache.add(buffer[i]);\r\n        overageHeight += itemHeight;\r\n        overage++;\r\n      }\r\n\r\n      if (overage > 0) {\r\n        // we need to adjust top padding element before items are removed from top\r\n        // to avoid strange behaviour of scroll bar during remove top items when we are at the very bottom\r\n        topPadding.height(topPadding.height() + overageHeight);\r\n        buffer.bof = false;\r\n        buffer.remove(0, overage);\r\n        buffer.first += overage;\r\n      }\r\n    },\r\n\r\n    adjustPadding() {\r\n      if (!buffer.length) {\r\n        return;\r\n      }\r\n\r\n      // precise heights calculation, items that were in buffer once\r\n      let topPaddingHeight = topPadding.cache.reduce((summ, item) => summ + (item.index < buffer.first ? item.height : 0), 0);\r\n      let bottomPaddingHeight = bottomPadding.cache.reduce((summ, item) => summ + (item.index >= buffer.next ? item.height : 0), 0);\r\n\r\n      // average item height based on buffer data\r\n      let visibleItemsHeight = buffer.reduce((summ, item) => summ + item.element.outerHeight(true), 0);\r\n      let averageItemHeight = (visibleItemsHeight + topPaddingHeight + bottomPaddingHeight) / (buffer.maxIndex - buffer.minIndex + 1);\r\n\r\n      // average heights calculation, items that have never been reached\r\n      let adjustTopPadding = buffer.minIndexUser !== null && buffer.minIndex > buffer.minIndexUser;\r\n      let adjustBottomPadding = buffer.maxIndexUser !== null && buffer.maxIndex < buffer.maxIndexUser;\r\n      let topPaddingHeightAdd = adjustTopPadding ? (buffer.minIndex - buffer.minIndexUser) * averageItemHeight : 0;\r\n      let bottomPaddingHeightAdd = adjustBottomPadding ? (buffer.maxIndexUser - buffer.maxIndex) * averageItemHeight : 0;\r\n\r\n      // paddings combine adjustment\r\n      topPadding.height(topPaddingHeight + topPaddingHeightAdd);\r\n      bottomPadding.height(bottomPaddingHeight + bottomPaddingHeightAdd);\r\n    },\r\n\r\n    adjustScrollTopAfterMinIndexSet(topPaddingHeightOld) {\r\n      // additional scrollTop adjustment in case of datasource.minIndex external set\r\n      if (buffer.minIndexUser !== null && buffer.minIndex > buffer.minIndexUser) {\r\n        let diff = topPadding.height() - topPaddingHeightOld;\r\n        viewport.scrollTop(viewport.scrollTop() + diff);\r\n      }\r\n    },\r\n\r\n    adjustScrollTopAfterPrepend(updates) {\r\n      if (!updates.prepended.length)\r\n        return;\r\n      const height = buffer.effectiveHeight(updates.prepended);\r\n      const paddingHeight = topPadding.height() - height;\r\n      if (paddingHeight >= 0) {\r\n        topPadding.height(paddingHeight);\r\n      }\r\n      else {\r\n        topPadding.height(0);\r\n        viewport.scrollTop(viewport.scrollTop() - paddingHeight);\r\n      }\r\n    },\r\n\r\n    resetTopPadding() {\r\n      topPadding.height(0);\r\n      topPadding.cache.clear();\r\n    },\r\n\r\n    resetBottomPadding() {\r\n      bottomPadding.height(0);\r\n      bottomPadding.cache.clear();\r\n    },\r\n\r\n    removeItem(item) {\r\n      topPadding.cache.remove(item);\r\n      bottomPadding.cache.remove(item);\r\n      return buffer.remove(item);\r\n    }\r\n  });\r\n\r\n  return viewport;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/viewport.js","function Cache() {\r\n  const cache = Object.create(Array.prototype);\r\n\r\n  angular.extend(cache, {\r\n    add(item) {\r\n      for (let i = cache.length - 1; i >= 0; i--) {\r\n        if (cache[i].index === item.scope.$index) {\r\n          cache[i].height = item.element.outerHeight();\r\n          return;\r\n        }\r\n      }\r\n      cache.push({\r\n        index: item.scope.$index,\r\n        height: item.element.outerHeight()\r\n      });\r\n      cache.sort((a, b) => ((a.index < b.index) ? -1 : ((a.index > b.index) ? 1 : 0)));\r\n    },\r\n\r\n    remove(item) {\r\n      for (let i = cache.length - 1; i >= 0; i--) {\r\n        if (cache[i].index === item.scope.$index) {\r\n          cache.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n      for (let i = cache.length - 1; i >= 0; i--) {\r\n        if (cache[i].index > item.scope.$index) {\r\n          cache[i].index--;\r\n        }\r\n      }\r\n    },\r\n\r\n    clear() {\r\n      cache.length = 0;\r\n    }\r\n  });\r\n\r\n  return cache;\r\n}\r\n\r\nexport default function Padding(template) {\r\n  let result;\r\n\r\n  switch (template.tagName.toLowerCase()) {\r\n    case 'dl':\r\n      throw new Error(`ui-scroll directive does not support <${template.tagName}> as a repeating tag: ${template.outerHTML}`);\r\n    case 'tr':\r\n      let table = angular.element('<table><tr><td><div></div></td></tr></table>');\r\n      result = table.find('tr');\r\n      break;\r\n    case 'li':\r\n      result = angular.element('<li></li>');\r\n      break;\r\n    default:\r\n      result = angular.element('<div></div>');\r\n  }\r\n\r\n  result.cache = new Cache();\r\n\r\n  return result;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/padding.js","function getCtrlOnData(attr, element) {\r\n  let onSyntax = attr.match(/^(.+)(\\s+on\\s+)(.+)?/);\r\n  if (onSyntax && onSyntax.length === 4) {\r\n    window.console.log('Angular ui-scroll adapter assignment warning. \"Controller On\" syntax has been deprecated since ui-scroll v1.6.1.');\r\n    let ctrl = onSyntax[3];\r\n    let tail = onSyntax[1];\r\n    let candidate = element;\r\n    while (candidate.length) {\r\n      let candidateScope = candidate.scope(); // doesn't work when debugInfoEnabled flag = true\r\n      let candidateName = (candidate.attr('ng-controller') || '').match(/(\\w(?:\\w|\\d)*)(?:\\s+as\\s+(\\w(?:\\w|\\d)*))?/);\r\n      if (candidateName && candidateName[1] === ctrl) {\r\n        return {\r\n          target: candidateScope,\r\n          source: tail\r\n        };\r\n      }\r\n      candidate = candidate.parent();\r\n    }\r\n    throw new Error('Angular ui-scroll adapter assignment error. Failed to locate target controller \"' + ctrl + '\" to inject \"' + tail + '\"');\r\n  }\r\n}\r\n\r\nclass Adapter {\r\n\r\n  constructor(viewport, buffer, adjustBuffer, reload, $attr, $parse, element, $scope) {\r\n    this.viewport = viewport;\r\n    this.buffer = buffer;\r\n    this.adjustBuffer = adjustBuffer;\r\n    this.reload = reload;\r\n\r\n    this.isLoading = false;\r\n    this.disabled = false;\r\n\r\n    const viewportScope = viewport.getScope();\r\n    this.startScope = viewportScope.$parent ? viewportScope : $scope;\r\n\r\n    this.publicContext = {};\r\n    this.assignAdapter($attr.adapter, $parse, element);\r\n    this.generatePublicContext($attr, $parse);\r\n  }\r\n\r\n  assignAdapter(adapterAttr, $parse, element) {\r\n    if (!adapterAttr || !(adapterAttr = adapterAttr.replace(/^\\s+|\\s+$/gm, ''))) {\r\n      return;\r\n    }\r\n    let ctrlOnData = getCtrlOnData(adapterAttr, element);\r\n    let adapterOnScope;\r\n\r\n    try {\r\n      if (ctrlOnData) { // \"Controller On\", deprecated since v1.6.1\r\n        $parse(ctrlOnData.source).assign(ctrlOnData.target, {});\r\n        adapterOnScope = $parse(ctrlOnData.source)(ctrlOnData.target);\r\n      }\r\n      else {\r\n        $parse(adapterAttr).assign(this.startScope, {});\r\n        adapterOnScope = $parse(adapterAttr)(this.startScope);\r\n      }\r\n    }\r\n    catch (error) {\r\n      error.message = `Angular ui-scroll Adapter assignment exception.\\n` +\r\n        `Can't parse \"${adapterAttr}\" expression.\\n` +\r\n        error.message;\r\n      throw error;\r\n    }\r\n\r\n    angular.extend(adapterOnScope, this.publicContext);\r\n    this.publicContext = adapterOnScope;\r\n  }\r\n\r\n  generatePublicContext($attr, $parse) {\r\n    // these methods will be accessible out of ui-scroll via user defined adapter\r\n    const publicMethods = ['reload', 'applyUpdates', 'append', 'prepend', 'isBOF', 'isEOF', 'isEmpty'];\r\n    for (let i = publicMethods.length - 1; i >= 0; i--) {\r\n      this.publicContext[publicMethods[i]] = this[publicMethods[i]].bind(this);\r\n    }\r\n\r\n    // these read-only props will be accessible out of ui-scroll via user defined adapter\r\n    const publicProps = ['isLoading', 'topVisible', 'topVisibleElement', 'topVisibleScope', 'bottomVisible', 'bottomVisibleElement', 'bottomVisibleScope'];\r\n    for (let i = publicProps.length - 1; i >= 0; i--) {\r\n      let property, attr = $attr[publicProps[i]];\r\n      Object.defineProperty(this, publicProps[i], {\r\n        get: () => property,\r\n        set: (value) => {\r\n          property = value;\r\n          this.publicContext[publicProps[i]] = value;\r\n          if (attr) {\r\n            $parse(attr).assign(this.startScope, value);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // non-read-only public property\r\n    Object.defineProperty(this.publicContext, 'disabled', {\r\n      get: () => this.disabled,\r\n      set: (value) => (!(this.disabled = value)) ? this.adjustBuffer() : null\r\n    });\r\n  }\r\n\r\n  loading(value) {\r\n    this['isLoading'] = value;\r\n  }\r\n\r\n  isBOF() {\r\n    return this.buffer.bof;\r\n  }\r\n\r\n  isEOF() {\r\n    return this.buffer.eof;\r\n  }\r\n\r\n  isEmpty() {\r\n    return !this.buffer.length;\r\n  }\r\n\r\n  applyUpdates(arg1, arg2) {\r\n    if (angular.isFunction(arg1)) {\r\n      // arg1 is the updater function, arg2 is ignored\r\n      this.buffer.slice(0).forEach((wrapper) => {\r\n        // we need to do it on the buffer clone, because buffer content\r\n        // may change as we iterate through\r\n        this.applyUpdate(wrapper, arg1(wrapper.item, wrapper.scope, wrapper.element));\r\n      });\r\n    } else {\r\n      // arg1 is item index, arg2 is the newItems array\r\n      if (arg1 % 1 !== 0) {// checking if it is an integer\r\n        throw new Error('applyUpdates - ' + arg1 + ' is not a valid index');\r\n      }\r\n\r\n      const index = arg1 - this.buffer.first;\r\n      if ((index >= 0 && index < this.buffer.length)) {\r\n        this.applyUpdate(this.buffer[index], arg2);\r\n      }\r\n    }\r\n\r\n    this.adjustBuffer();\r\n  }\r\n\r\n  append(newItems) {\r\n    this.buffer.append(newItems);\r\n    this.adjustBuffer();\r\n  }\r\n\r\n  prepend(newItems) {\r\n    this.buffer.prepend(newItems);\r\n    this.adjustBuffer();\r\n  }\r\n\r\n  calculateProperties() {\r\n    let rowTop = null, topHeight = 0;\r\n    let topDone = false, bottomDone = false;\r\n    const length = this.buffer.length;\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      const item = this.buffer[i];\r\n      const itemTop = item.element.offset().top;\r\n\r\n      if (rowTop !== itemTop) { // a new row condition\r\n        const itemHeight = item.element.outerHeight(true);\r\n        const top = this.viewport.topDataPos() + topHeight + itemHeight;\r\n\r\n        if (!topDone && top > this.viewport.topVisiblePos()) {\r\n          topDone = true;\r\n          this['topVisible'] = item.item;\r\n          this['topVisibleElement'] = item.element;\r\n          this['topVisibleScope'] = item.scope;\r\n        }\r\n\r\n        if (!bottomDone && (top >= this.viewport.bottomVisiblePos() || (i === length - 1 && this.isEOF()))) {\r\n          bottomDone = true;\r\n          this['bottomVisible'] = item.item;\r\n          this['bottomVisibleElement'] = item.element;\r\n          this['bottomVisibleScope'] = item.scope;\r\n        }\r\n        topHeight += itemHeight;\r\n      }\r\n\r\n      rowTop = itemTop;\r\n\r\n      if (topDone && bottomDone) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  applyUpdate(wrapper, newItems) {\r\n    if (!angular.isArray(newItems)) {\r\n      return;\r\n    }\r\n\r\n    let keepIt;\r\n    let pos = (this.buffer.indexOf(wrapper)) + 1;\r\n\r\n    newItems.reverse().forEach((newItem) => {\r\n      if (newItem === wrapper.item) {\r\n        keepIt = true;\r\n        pos--;\r\n      } else {\r\n        this.buffer.insert(pos, newItem);\r\n      }\r\n    });\r\n\r\n    if (!keepIt) {\r\n      wrapper.op = 'remove';\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Adapter;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/adapter.js"],"sourceRoot":""}